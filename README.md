# StudentLife 行為分析專案

## 課程背景
本專案為「機器學習在行為科學之應用」課程期末專題，課程由心理系的數學與機器學習專家開設，強調跨領域資料分析、模型解釋性與行為科學理論結合。專案目標為運用機器學習方法，探討大學生日常行為、心理狀態與學業表現之間的關聯，並重視模型結果的可解釋性與理論意義。

## 專案簡介
本專案基於 StudentLife dataset，進行多模態感測資料、問卷、EMA（生態瞬時評量）等資料的自動化特徵工程與合併，最終用於行為科學與學業預測分析。

## 資料集取得與使用規範
- **資料集來源**：[StudentLife Dataset 官方網站](https://studentlife.cs.dartmouth.edu/datasets.html)
- **下載方式**：需自行申請，通過後下載原始壓縮檔
- **請勿將原始資料集上傳至 GitHub**，本專案僅提供程式碼與特徵工程流程
- **下載後請將資料放置於 `data/dataset/` 目錄**
- **資料集僅供學術用途，請遵守原始授權與倫理規範**

## .gitignore 建議
請在專案根目錄建立 `.gitignore`，內容建議如下：
```
data/
*.tar.bz2
*.csv
*.json
*.zip
*.parquet
*.feather
```
這樣可避免誤將大型或敏感資料檔案加入版本控制。

## 專案結構
- `src/`：自動化資料載入、特徵工程、合併模組
- `notebooks/`：Jupyter 探索與分析
- `results/`：分析結果與圖表
- `data/`：原始資料（**不會上傳**）
- `README.md`、`requirements.txt`、`config.py`、`.gitignore` 等

## 專案目標與重點
- 自動化感測器、問卷、EMA 等多源資料的特徵工程與合併
- 探討睡眠、手機使用、活動、心理狀態等行為特徵對學業表現的預測力
- 強調模型的可解釋性（如特徵重要性、相關性分析、理論詮釋）
- 結合行為科學理論（自我調節、壓力理論、社會認知等）進行結果討論
- 嚴格遵守資料倫理與隱私規範

## 安裝方式
```bash
pip install -r requirements.txt
```

## 執行方式
### 一鍵自動化分析
```bash
python -m src.auto_analysis
```
- 會自動完成特徵工程、資料合併、分布圖、相關性熱圖、多模型訓練、特徵重要性、初步報告產生。
- 產出物：`results/auto_report.md`、`results/figures/` 下的圖檔。

### 資料結構檢查
```bash
python -m src.check_dataset
```
- 檢查所有關鍵資料夾與檔案是否存在，並給出明確提示。

## 自動化與防呆機制說明
- **所有特徵工程與分析步驟皆自動檢查資料夾與欄位**，缺失時自動 logger.warning 並跳過，不會中斷。
- **合併 target (GPA) 支援自動偵測常見欄位名稱**（如 gpa, GPA, grade, final, score）。
- **分析步驟遇資料全空自動防呆**，log 明確提示。
- **log 訊息會明確指出缺失的資料夾、檔案或欄位**，方便後續補齊。

## 目前資料狀態與常見問題
- 目前多數感測器、問卷、EMA 資料夾或 csv 檔案缺失，或欄位名稱與預期不符，導致 pipeline 產生的特徵與目標皆為空。
- 下游分析（分布圖、熱圖、建模、報告）會自動跳過，僅留下警告訊息。
- **這是防呆設計的正常行為，代表技術障礙已排除，剩下的都是資料整理與欄位對應的工作。**

## 交接與後續工作建議
1. **資料整理與欄位對應**：
   - 檢查每個感測器/問卷/EMA 的 csv 檔案，確認欄位名稱與 pipeline 預期一致。
   - 如欄位名稱不同，需手動對應或在 loader/feature_engineering 內加上自動對應邏輯。
   - 補齊缺失的資料夾或 csv 檔案。
2. **欄位自動對應與資料預處理**：
   - 可在 `feature_engineering.py` 內針對常見欄位異名（如 `uid`、`user_id`，`gpa all`、`gpa`）加上自動對應。
   - 可寫一個「資料結構自動報告」腳本，列出每個 DataFrame 的所有欄位，方便人工對應。
3. **資料補齊後的驗證**：
   - 每補齊一個欄位或資料夾，pipeline 就會自動產生對應特徵與分析結果。
   - 可逐步補齊、逐步驗證，確保每個感測器/問卷/EMA都能正確產生特徵。
4. **分析與報告產出**：
   - 當資料補齊後，pipeline 會自動產生分布圖、熱圖、模型效能比較、特徵重要性與初步報告。
   - 組員可專注於解讀這些結果、撰寫學術報告或海報。

## 與企畫書目標的距離
- **已完成**：
  - 完整自動化資料載入、特徵工程、合併、建模、可視化與報告產生的技術架構。
  - 強健的防呆與自動容錯，確保 pipeline 不會因資料問題中斷。
  - 專案結構、程式自動化、交接友善度均達到高標準。
- **尚未完成**：
  - 資料補齊與欄位對應，產生有效特徵與分析結果。
  - 實質資料分析、模型解釋與行為科學討論。
  - 學術報告/海報內容撰寫。

---

如有任何問題，歡迎討論或聯絡專案負責人。